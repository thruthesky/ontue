<ion-header>
  <header-content></header-content>
</ion-header>

<ion-content padding>
  <section class="schedule-table">
    Teacher Schedule Table

    <hr> TODO: Sort by time.
    <hr> Search Option:
    <br> Session Duration:

    <select name="days" [(ngModel)]="min_duration" (change)="onChangeSearchOption()">
      <option *ngFor="let i of [0,5,10,15,25,30,35,40,50,60,70,80,90,100]" value="{{ i }}">{{ i }}</option>
    </select>
    ~
    <select name="days" [(ngModel)]="max_duration" (change)="onChangeSearchOption()">
      <option value="0"></option>
      <option *ngFor="let i of [5,10,15,25,30,35,40,50,60,70,80,90,100]" value="{{ i }}">{{ i }}</option>
    </select>
    <br> Select/Display teachers: Group of Levels 0,1,2,3,4,5. Male, Female, Age
    <br> Points between
    <input type="text" name="min_point" [(ngModel)]="min_point" (keyup)="onChangeValue()"> ~
    <input type="text" name="max_point" [(ngModel)]="max_point" (keyup)="onChangeValue()">
    <button (click)="onChangeSearchOption()">Update</button>
    <hr> Display Options: Display what days: select:
    <input (change)="onChangeSearchOption()" type="checkbox" name="sunday" [(ngModel)]="sunday"> Sunday
    <input (change)="onChangeSearchOption()" type="checkbox" name="monday" [(ngModel)]="monday"> Monday
    <input (change)="onChangeSearchOption()" type="checkbox" name="tuesday" [(ngModel)]="tuesday"> Tuesday
    <input (change)="onChangeSearchOption()" type="checkbox" name="wednesday" [(ngModel)]="wednesday"> Wednesday
    <input (change)="onChangeSearchOption()" type="checkbox" name="thursday" [(ngModel)]="thursday"> Thursday
    <input (change)="onChangeSearchOption()" type="checkbox" name="friday" [(ngModel)]="friday"> Firday
    <input (change)="onChangeSearchOption()" type="checkbox" name="saturday" [(ngModel)]="saturday"> Saturday -
    <span class="pointer" (click)="selectMonToFri()">M-F</span>~
    <span class="pointer" (click)="selectMWF()">M-W-F</span>~
    <span class="pointer" (click)="selectTTh()">T-TH</span>~
    <span class="pointer" (click)="selectSunSat()">Sun-Sat</span>~
    <span class="pointer" (click)="selectAll()">All</span>
    <br> How many days( Columns ):
    <select name="days" [(ngModel)]="days" (change)="onChangeSearchOption()">
      <option *ngFor="let i of [1,2,3,4,5,6,7,8,9,10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31]"
              value="{{ i }}">{{ i }}</option>
    </select>
    <br> Show reserved/avaailable session.
    <br>

    <hr> Welcome {{ a.user.name }} Your timezone: {{ a.user.timezone }}, Your point:
    <span *ngIf=" ! a.inLoadingMyPoint ">{{ my_point }}</span>
    <ion-spinner *ngIf=" a.inLoadingMyPoint "></ion-spinner>
    <!--
    {{ re.header | json }} -->


    <div class="buttons">
      <button (click)="onClickNavigate('previous-month')">Previous Month</button>
      <button (click)="onClickNavigate('previous-week')">Previous Week</button>
      <button (click)="onClickNavigate('today')">Today</button>
      <button (click)="onClickNavigate('next-week')">Next Week</button>
      <button (click)="onClickNavigate('next-month')">Next Month</button>
    </div>
    <table class="schedule-table" *ngIf=" re && re.table " border="1">
      <tr>
        <td>Teacher</td>
        <td>Time</td>
        <td>Reserve Visible</td>
        <td *ngFor="let header of re.header">
          <div class="w-100 text-center" (click)="onClickNavigate( header.date )">
            <!--{{ header | json }}-->
            {{ header.display_date }}
            <br> {{ header.user_time_day | translate }}
          </div>
        </td>
      </tr>


      <tr valign="top" *ngFor="let sessions of re.table">
        <td>

          {{ sessions[0].idx_schedule }}
          <br> {{ schedule( sessions[0].idx_schedule ).idx_teacher }}
          <br> {{ schedule( sessions[0].idx_schedule ).teacher.name }}
        </td>
        <td>
          {{ schedule( sessions[0].idx_schedule ).user_time_class_begin }}
          <br> {{ schedule( sessions[0].idx_schedule ).duration }}
          <hr>
          <!--{{ schedule( sessions[0].idx_schedule ) | json }}-->
        </td>
        <td><button class="btn btn-primary mb-2" (click)="onClickReserveVisible(sessions)">All</button><button class="btn btn-primary" (click)="onClickReserveCancel(sessions)">Cancel</button> </td>
        <td *ngFor=" let session of sessions ">
           <!--{{session|json}}-->
          <div class="session pointer" [attr.status]=" session['status'] " [attr.owner]=" session['owner'] " text-center (click)="onClickSession( session )">
            <!-- show icon -->
            <div class="status-icon">
              <ion-icon class="fs-3rem" name="{{ icon(session) }}"></ion-icon>

              <!-- <ion-icon class="fs-3rem grey" name="remove" *ngIf=" session.status == 'past-reserved' "></ion-icon>
              <ion-icon class="fs-3rem orange" name="radio-button-off" *ngIf=" session.status == 'open' "></ion-icon>
              <ion-icon class="fs-3rem grey" name="close" *ngIf=" session.status == 'open-reserved' && !session.owner"></ion-icon>
              <ion-icon class="me fs-3rem indigo" name="radio-button-on" *ngIf=" session.status == 'open-reserved' && session.owner == 'me' "></ion-icon>
              <ion-icon class="me fs-3rem indigo" name="hand" *ngIf=" session.status == 'open-dayoff' "></ion-icon>
              <ion-icon class="me fs-3rem indigo" name="radio-button-on" *ngIf=" session.status == 'reserved-dayoff' "></ion-icon> -->

            </div>


            <!-- show loader -->
            <div class="loader-icon">
              <ion-spinner name="bubbles" *ngIf=" session.in_progress "></ion-spinner>
            </div>

            <!-- show class informatio -->
            <div>{{ session.point }}</div>
            <div *ngIf=" session.status == 'reserved' ">{{ session.student_name }}</div>
            <div>{{ session.prere }}</div>
            <div>{{ session.idx_reservation }}</div>
            <!-- <div>{{ session.day }}</div> -->
          </div>
          <div class="session empty" *ngIf=" session.status == 'empty' "></div>

        </td>
      </tr>
    </table>
    <ul>
      <li>
        <ion-icon name="radio-button-off"></ion-icon> - Reservable
      </li>
      <li>
        <ion-icon name="radio-button-on"></ion-icon> - Reserved by me. It's your class. you can cancel it.
      </li>
      <li>
        <ion-icon name="close"></ion-icon> - Reserved by other student.
      </li>
    </ul>

  </section>
</ion-content>
